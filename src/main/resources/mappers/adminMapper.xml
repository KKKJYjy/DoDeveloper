<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
    PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
    "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.dodeveloper.mappers.adminMapper">

	<!-- study게시글 조회 -->
	<select id="getBoard" resultType="AdminVO">
		select * from studyBoard order by stuNo desc limit #{startRowIndex},#{viewPostCntPerPage}
	</select>
	
	<select id="getTotalBoardCnt" resultType="int">
		select count(*) as totalPostCnt from studyBoard
	</select>

	<!-- 불량 회원 조회 -->
	<select id="getBadMemberBoard" resultType="BadMemberBoardVO">
		select * from reportBoard order by reportNo desc
	</select>
	
	<!-- 강의추천게시판 조회 -->
	<select id="getLecBoard" resultType="AdminLectureVO">
	 	select * from lectureBoard order by lecNo desc limit #{startRowIndex},#{viewPostCntPerPage}
	</select>
	
	<!-- 알고리즘게시판 조회 -->
	<select id="getArgBoard" resultType="AdminArgBoardVO">
		select * from algBoard order by boardNo desc limit #{startRowIndex},#{viewPostCntPerPage}
	</select>
	
	<!-- 리뷰게시판 조회 -->
	<select id="getRevBoard" resultType="AdminReviewBoardVO">
		select * from companyrevboard order by revNo desc limit #{startRowIndex},#{viewPostCntPerPage}
	</select>
	
	<!-- 공지사항 조회 -->
	<select id="getNotcBoard" resultType="NoticeDTO">
		select * from noticeBoard order by boardNo desc limit #{startRowIndex},#{viewPostCntPerPage}
	</select>
	
	
	<!-- 검색어가 있을 경우 글의 갯수를 가져오는 쿼리문 -->
	<select id="getStuBoardCntWithSC" resultType="int">
		select count(*) from studyBoard
		<choose>
			<when test="searchType == 'stuTitle'">
				where stuTitle like #{searchValue}
			</when>
			<when test="searchType == 'stuWriter'">
				where stuWriter like #{searchValue}
			</when>
		</choose>
	</select>
	
	<!-- 검색어가 있을 경우 검색된 글을 가져오는 쿼리문 -->
	<select id="getStuBoardListWithSC" resultType="AdminVO">
		select * from studyBoard
		<choose>
			<when test="searchType == 'stuTitle'">
				where stuTitle like #{searchValue}
			</when>
			<when test="searchType == 'stuWriter'">
				where stuWriter like #{searchValue}
			</when>
		</choose>
		
			order by stuNo desc limit #{startRowIndex}, #{viewPostCntPerPage}
	</select>
	
	<!-- stuBoard게시글 삭제 -->
	<delete id="deleteStuBoard">
		delete from studyBoard where stuNo = #{stuNo}
	</delete>
	
	<!-- 강의추천 게시글 삭제 -->
	<delete id="deleteLecBoard">
		delete from lectureBoard where lecNo = #{lecNo}
	</delete>
	
	<!-- 알고리즘 게시글 삭제 -->
	<delete id="deleteAlgBoard">
		delete from algBoard where boardNo = #{boardNo}
	</delete>
	
	<!-- reviewBoard 게시글 삭제 -->
	<delete id="deleteRevBoard">
		delete from companyrevboard where revNo = #{revNo}
	</delete>
	
	<!-- 공지사항 게시글 삭제 -->
	<delete id="deleteNotcBoard">
		delete from noticeBoard where boardNo = #{boardNo}
	</delete>
	
	<!-- 신고내역 삭제 -->
	<delete id="deleteReportBoard">
		delete from reportBoard where reportNo = #{reportNo}
	</delete>
	
	
	
	<!-- 공지사항 작성 -->
	<insert id="insertNoticeBoard">
		insert into noticeBoard(writer, title, content) values(#{writer}, #{title}, #{content})
	</insert>
	
	<!-- 신고내역 조회 -->
	<select id="getReport" resultType="ReportVO">
		select * from reportBoard order by reportNo desc
	</select>
	
	<!-- 신고내역 ?번 글을 가져오는 쿼리문 -->
	<select id="selectReportNo" resultType="ReportVO">
		select * from reportBoard where reportNo = #{reportNo}
	</select>
	
	
	


	<!-- 유저 전체 조회 -->
	<select id="selectAllUser" resultType="MemberVO">
		select userId, userName,
		email, careers, registerDate, status from member
	</select>

	<!-- 유저 아이디로 조회 -->
	<select id="selectUserId" resultType="MemberVO">
		select userId, userName,
		email, careers, registerDate, status from member where userId =
		#{userId}
	</select>

	<!-- 신고내역 조회 -->
	<select id="selectReport" resultType="ReportVO">
		select * from reportBoard
	</select>

	<!-- 신고내역 삭제 -->
	<delete id="deleteReport">
		delete * from reportBoard where writer = #{userId}
	</delete>


</mapper>